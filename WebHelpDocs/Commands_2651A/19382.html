<html>
<head>
<title> display.loadmenu.add() </title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" />
<style type="text/css">
div.kpos {width:654px; left:0px; position:fixed;}
table {border:1px solid #C0C0C0; padding-left:0px; float:none; clear:both;}
td  {border:1px solid #C0C0C0;  padding-left:0px;}
p.iclsubheading {clear:both;}
p.iclspacing {clear:both; padding-left:55px;}
p.iclcode {clear:both; padding-left:55px;}
p.iclbody {clear:both; padding-left:55px;}
h2.heading2-icl {clear:both; }
br {clear:both;}
hr {clear:both;}

</style>
</head>
<body>
<div class="kpos">

<table class="relatedtopics aboveheading" cellpadding="0" cellspacing="0" border="0">
<tr valign="top">
<td width= "18">
<p class="bodytext"><a href="14703.html" target="_self"><img src="125.gif" alt="Previous Topic" height="17" width="18" vspace="0" hspace="0" align="top" border="0"></a></p></td>
<td width= "18">
<p class="bodytext"><a href="14705.html" target="_self"><img src="124.gif" alt="Next Topic" height="17" width="18" vspace="0" hspace="0" align="top" border="0"></a></p></td>
</tr>
</table>
<h2 class="heading2-icl">display.loadmenu.add()</h2>
<p class="bodyzero">This function adds an entry to the User menu, which can be accessed by pressing the <strong class="specialbold">LOAD</strong> key on the instrument front panel.</p>
<table class="tableintopic" width="660" cellpadding="2" cellspacing="0" border="2" style="border-collapse:collapse; border:2px solid #D3D3D3">
<tr align="left" valign="top">
<th bgcolor="#191970" style="border:2px solid #D3D3D3;" width="102"><p class="tableheadingwhitetext">Type</p>
</th>
<th bgcolor="#191970" style="border:2px solid #D3D3D3;" width="156"><p class="tableheadingwhitetext">TSP-Link accessible</p>
</th>
<th bgcolor="#E4E4E4" style="border:2px solid #D3D3D3;" width="102"><p class="tableheading"><span class="grayedout">Affected by</span></p>
</th>
<th bgcolor="#E4E4E4" style="border:2px solid #D3D3D3;" width="102"><p class="tableheading"><span class="grayedout">Where saved</span></p>
</th>
<th bgcolor="#E4E4E4" style="border:2px solid #D3D3D3;" width="198"><p class="tableheading"><span class="grayedout">Default value</span></p>
</th>
</tr>
<tr align="left" valign="top">
<td style="border:2px solid #D3D3D3;" width="102"><p class="tablebodytextsmall">Function</p>
</td>
<td style="border:2px solid #D3D3D3;" width="156"><p class="tablebodytextsmall">Yes</p>
</td>
<td style="border:2px solid #D3D3D3;" width="102"><p class="tablebodytextsmall">&nbsp;</p>
</td>
<td style="border:2px solid #D3D3D3;" width="102"><p class="tablebodytextsmall">&nbsp;</p>
</td>
<td style="border:2px solid #D3D3D3;" width="198"><p class="tablebodytextsmall">&nbsp;</p>
</td>
</tr>

</table>
<p class="iclsubheading">Usage</p>
<p class="iclcode">display.loadmenu.add(<em class="emphasis">displayName</em>, <em class="emphasis">code</em>)</p>
<p class="iclcode">display.loadmenu.add(<em class="emphasis">displayName</em>, <em class="emphasis">code</em>, <em class="emphasis">memory</em>)</p>
<p class="iclspacing"></p>
<table class="tableintopic" width="594" cellpadding="2" cellspacing="0" border="1" style="border-collapse:collapse; border:1px solid #C0C0C0">
<tr align="left" valign="top">
<td style="border:1px solid #C0C0C0;" width="138"><p class="tablebodytext"><span class="monospaceitalic">displayName</span></p>
</td>
<td style="border:1px solid #C0C0C0;" width="456"><p class="tablebodytext">The name that is added to the User menu</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #C0C0C0;" width="138"><p class="tablebodytext"><span class="monospaceitalic">code</span></p>
</td>
<td style="border:1px solid #C0C0C0;" width="456"><p class="tablebodytext">The code that is run from the User menu</p>
</td>
</tr>
<tr align="left" valign="top">
<td style="border:1px solid #C0C0C0;" width="138"><p class="tablebodytext"><span class="monospaceitalic">memory</span></p>
</td>
<td style="border:1px solid #C0C0C0;" width="456"><p class="tablebodytext">Determines if code is saved to nonvolatile memory:</p>
<p class="tablebodytext"><code class="monospace">0</code> or <code class="monospace">display.DONT_SAVE</code>: Does not save the code to nonvolatile memory</p>
<p class="tablebodytext"><code class="monospace">1</code> or <code class="monospace">display.SAVE</code>: Saves the code to nonvolatile memory (default)</p>
</td>
</tr>

</table>
<p class="iclsubheading">Details</p>
<p class="iclbody">After adding code to the load menu, you can run it from the front panel by pressing the <strong class="specialbold">LOAD</strong> key, then selecting <strong class="specialbold">USER</strong> to select from the available code to load. Pressing the <strong class="specialbold">RUN </strong>key will then run the script.</p>
<p class="iclbody">You can add items in any order. They are always displayed in alphabetical order when the menu is selected.</p>
<p class="iclbody">Any Lua code can be can be included in the <span class="monospaceitalic">code</span> parameter. If <span class="monospaceitalic">memory</span> is set to <code class="monospace">display.SAVE</code>, the entry (name and code) is saved in nonvolatile memory. Scripts, functions, and variables used in the code are not saved by <code class="monospace">display.SAVE</code>. Functions and variables need to be saved with the code. If the code is not saved in nonvolatile memory, it will be lost when the Model 2651A is turned off. See <strong class="specialbold">Example 2</strong> below.</p>
<p class="iclbody">If you do not make a selection for <span class="monospaceitalic">memory</span>, the code is automatically saved to nonvolatile memory.</p>
<p class="quicktip"><img src="quicktiphelp.png" alt="QUICK TIP" height="48" width="176" vspace="0" hspace="0" align="bottom" border="0"><br>You can create a script that defines several functions, and then use the<code class="monospace"> display.loadmenu.add()</code> command to add items that call those individual functions. This allows the operator to run tests from the front panel.</p>
<p class="iclsubheading">Example 1</p>
<p class="iclspacing"></p>
<table class="tableintopic" width="594" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse">
<tr align="left" valign="top">
<td bgcolor="#E0E0E0" width="342"><p class="codetable">display.loadmenu.add(&quot;Test9&quot;, &quot;Test9()&quot;)</p>
</td>
<td width="252"><p class="tablebodytext">Assume a user script named &quot;Test9&quot; has been loaded into the run-time environment. Adds the menu entry to the User menu to run the script after loading.</p>
</td>
</tr>

</table>
<p class="iclsubheading">Example 2</p>
<p class="iclspacing"></p>
<table class="tableintopic" width="594" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse">
<tr align="left" valign="top">
<td bgcolor="#E0E0E0" width="342"><p class="codetable">display.loadmenu.add(</p>
<p class="codetable">   &quot;Test&quot;, &quot;DUT1() beeper.beep(2, 500)&quot;, display.SAVE)</p>
</td>
<td width="252"><p class="tablebodytext">Assume a script with a function named &#8220;DUT1&#8221; has already been loaded into the instrument, and the script has NOT been saved in nonvolatile memory.</p>
<p class="tablebodytext">Now assume you want to add a test named &#8220;Test&#8221; to the USER TESTS menu. You want the test to run the function named &#8220;DUT1&#8221; and sound the beeper. This example adds &#8220;Test&#8221; to the menu, defines the code, and then saves the <code class="monospace">displayName</code> and code in nonvolatile memory.</p>
<p class="tablebodytext">When &#8220;Test&#8221; is run from the front panel USER TESTS menu, the function named &#8220;DUT1&#8221; executes and the beeper beeps for two seconds.</p>
<p class="tablebodytext">Now assume you turn off instrument power. Because the script was not saved in nonvolatile memory, the function named &#8220;DUT1&#8221; is lost when you turn the instrument on. When &#8220;Test&#8221; is again run from the front panel, an error is generated because DUT1 no longer exists in the instrument as a function.</p>
</td>
</tr>

</table>
<p class="iclsubheading">Example 3</p>
<p class="iclspacing"></p>
<table class="tableintopic" width="594" cellpadding="2" cellspacing="0" border="0" style="border-collapse:collapse">
<tr align="left" valign="top">
<td bgcolor="#E0E0E0" width="342"><p class="codetable">display.loadmenu.add(&quot;Part1&quot;, &quot;testpart([[Part1]], 5.0)&quot;, display.SAVE)</p>
</td>
<td width="252"><p class="tablebodytext">Adds an entry called &#8220;Part1&#8221; to the front panel &#8220;USER TESTS&#8221; load menu for the code <code class="monospace">testpart([[Part1]], 5.0)</code>, and saves it in nonvolatile memory.</p>
</td>
</tr>

</table>
<p class="iclsubheading">Also see</p>
<p class="listcommand"><a id="h14726" class="jumptemplate" title="display.loadmenu.delete()" href="14706.html" target="_self">display.loadmenu.delete()</a></p>



<br/>
<hr/>
<p class="bodytext">Copyright (c) 2007-2012, Keithley Instruments, Inc.  All rights reserved.</p>
</div>
</body>

</html>
