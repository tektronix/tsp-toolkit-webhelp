{"pages":[{"id":1,"title":"TSP command reference","url":"_TSP_command_reference.htm","text":""},{"id":2,"title":"MP5000 trigger model commands","url":"132065.htm","text":"The TSP trigger model commands available for the MP5000 Series Modular Precision Mainframe and modules are listed in alphabetical order.  "},{"id":3,"title":"slot[Z].trigger.model.abort()","url":"114956.htm","text":"This function stops trigger model execution on the specified module.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.abort(\"\")  slot[Z].trigger.model.abort(\"triggerModelName\")  Z  Module slot number  triggerModelName  Name of the trigger model to abort  Details  This function stops the running trigger model on the specified&nbsp;module. If no trigger model name is provided, it aborts all trigger models running on the slot.  Example  SLOT = 1  slot[SLOT].trigger.model.delete(\"TM1\")  slot[SLOT].trigger.model.create(\"TM1\")  slot[SLOT].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput1\", 1, 0)  slot[SLOT].trigger.model.addblock.delay.constant(\"TM1\", \"delay2\", 2)  slot[SLOT].trigger.model.addblock.logevent(\"TM1\", \"logevent3\", slot[SLOT].trigger.model.LOG_INFO3, \"logevent3\")  slot[SLOT].trigger.model.addblock.branch.always(\"TM1\", \"branchalways4\", \"sourceoutput1\")  slot[SLOT].trigger.model.initiate(\"TM1\")  print(slot[SLOT].trigger.model.state(\"TM1\"))  -- Please wait to allow the logevents to display.  -- Press <Enter> a few times to dump standard output.  slot[SLOT].trigger.model.abort(\"TM1\")  print(slot[SLOT].trigger.model.state(\"TM1\"))  In this example, the trigger model will run an infinite loop, logging an eventlog message every two seconds. Use the abort function to correctly stop the infinite loop.  Trigger models require one channel to be assigned. This is the reason for the source.output block that always turns off the output.  Also see  slot[Z].trigger.model.initiate()  "},{"id":4,"title":"slot[Z].trigger.model.addblock.branch.always()","url":"114960.htm","text":"This function defines a trigger model block that always branches to a specific block.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.branch.always(\"triggerModelName\", \"blockName\", \"branchToBlockName\")  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the block to be added  branchToBlockName  Name of the next trigger block to run  Details  When a trigger model reaches a branch-always trigger block, it goes to the block specified by branchToBlockName. This block must exist in the trigger model.  Example  slot[1].smu[1].source.levelv = 1.0  slot[1].trigger.model.create(\"TM1\")  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput1\", 1, 1)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"delay2\", 0.1)  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput3\", 1, 0)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"delay4\", 0.1)  slot[1].trigger.model.addblock.branch.always(\"TM1\", \"branchalways5\", \"sourceoutput1\")  slot[1].trigger.model.initiate(\"TM1\")  -- Wait to allow time for pulses to show up on the channel output.  In this example, the  trigger model turns on and turns off a 1 V signal with a pulse width of 100 ms. The trigger model runs infinitely on channel 1 of the module installed in slot 1.  You can use the slot[Z].trigger.model.abort() command to end the loop.  Trigger model diagram  Also see  slot[Z].trigger.model.abort()  slot[Z].trigger.model.initiate()  "},{"id":5,"title":"slot[Z].trigger.model.addblock.branch.counter()","url":"114961.htm","text":"This function defines a trigger model block that branches to a block a specified number of times.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.branch.counter(\"triggerModelName\", \"blockName\", \"branchToBlockName\", targetCount)  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the block to be added  branchToBlockName  Name of the next block to run  targetCount  Number of times to repeat the branch  Details  This command defines a trigger model block that branches to another block a specified number of times.  The counter starts at 0 when the trigger model begins, and increments each time the branch.counter block is reached. The counter is then compared to the specified targetCount.  If the counter is less than or equal to targetCount, the trigger model branches to the specified branchToBlockName that exists in the trigger model. If the counter exceeds targetCount, the trigger model continues to the next block in sequence, and the counter is reset to 0.  Example  slot[1].smu[1].trigger.source.linearv(0, 5, 10)   slot[1].trigger.model.create(\"TM1\")  slot[1].trigger.model.addblock.source.output(\"TM1\", \"\", 1, 1)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"delay2\", 0.1)  slot[1].trigger.model.addblock.source.action.step(\"TM1\", \"\", 1)  slot[1].trigger.model.addblock.branch.counter(\"TM1\", \"\", \"delay2\", 40)  slot[1].trigger.trigger.model.initiate(\"TM1\")  -- Turn off source output.  slot[1].smu[1].source.output = slot[1].smu.OFF  This example demonstrates a trigger model that uses branch-counter to linear sweep the output of channel1 four times.  Trigger model diagram  Also see  None  "},{"id":6,"title":"slot[Z].trigger.model.addblock.branch.event()","url":"114966.htm","text":"This function defines a trigger model block that branches to another trigger model block when an event occurs.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.branch.event(\"triggerModelName\", \"blockName\", \"branchToBlockName\", eventId)  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the block to be added  branchToBlockName  Name of the block to branch to on true condition  eventId  The event that must occur before the trigger model branches to the specified block; for example, slot[Z].trigger.model.EVENT_NOTIFY4  Details  The branch.event block goes to a specified trigger model block after a specified trigger event occurs. If the trigger event has not yet occurred when the trigger model reaches the branch.event block, the trigger model continues to execute the blocks in the normal sequence. After the trigger event occurs, the trigger model proceeds to the specified trigger model block when the branch.event block is encountered.  After an event occurs and the branch.event block executes, the branch is taken and the event detector is cleared. The trigger event must occur again for the trigger model to execute to the block again; otherwise, the blocks are executed in the normal sequence.  If you set the branch event to none, an error is generated when you run the trigger model.  The following table shows the constants for the events.  ID  Description  digio.trigger[N].EVENT_ID  Occurs when a digital I/O line changes state according to its configured trigger mode  slot[Z].trigger.model.EVENT_AT_LIMIT (SMUs only)  slot[Z].trigger.model.EVENT_NOTIFYN  Occurs when the notify block of the trigger model is executed  trigger.generator[N].EVENT_ID  Trigger generator event  trigger.timer[N].EVENT_ID  Occurs when the timer delay of timer N elapses  tsplink.trigger[N].EVENT_ID  Occurs when a TSP-Link line changes state according to its configured trigger mode  Example  slot[1].smu[1].source.levelv = 5.0  slot[1].trigger.model.delete(\"branchonevent2\")  slot[1].trigger.model.create(\"TM2\")  slot[1].trigger.model.addblock.source.output(\"TM2\", \"sourceoutput1\", 1, 1)  slot[1].trigger.model.addblock.delay.constant(\"TM2\", \"delay2\", 0.1)  slot[1].trigger.model.addblock.branch.event(\"TM2\", \"branchonevent3\", \"TheEnd\", slot[1].trigger.model.EVENT_NOTIFY1)  slot[1].trigger.model.addblock.branch.counter(\"TM2\", \"branchcounter4\", \"sourceoutput1\", 3)  slot[1].trigger.model.addblock.source.output(\"TM2\", \"sourceoutput5\", 1, 0)  slot[1].trigger.model.addblock.notify(\"TM2\", \"notify6\", slot[1].trigger.model.EVENT_NOTIFY1)  slot[1].trigger.model.addblock.branch.counter(\"TM2\", \"branchcounter7\", \"sourceoutput1\", 3)  slot[1].trigger.model.addblock.source.output(\"TM2\", \"TheEnd\", 1, 0)  slot[1].trigger.model.initiate(\"TM2\")  This example demonstrates a trigger model that uses branch.event to differentiate two loops. The first loop lacks EVENT_NOTIFY1, so its pulse is 300 ms. The second loop occurs after EVENT_NOTIFY1, so its pulse is 100 ms long. The trigger model then stops.  Also see  Branch on event block  "},{"id":7,"title":"slot[Z].trigger.model.addblock.branch.once()","url":"114964.htm","text":"This function causes the trigger model to branch to a specified trigger model block the first time it is encountered in the trigger model.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.branch.once(\"triggerModelName\", \"blockName\", \"branchToBlockName\")  Z  Module slot number  triggerModelName  Name of the trigger model to which the block is added  blockName  Name of the trigger block  branchToBlockName  Name of the block to branch to on the first pass through this block  Details  The branch.once trigger model block branches to a specified block the first time it is encountered by the trigger model. If the block is encountered again, it is ignored, and the trigger model proceeds to the next trigger model block.  The branch.once block is reset when the trigger model execution completes.  The branch.once block is reset as part of the setup for starting execution of the trigger model. When the trigger model execution completes, the internal, hidden, code has the internal counter set to state that the branch.once block has been activated.  Example  slot[1].trigger.model.create(\"TM1\")  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput1\", 1, 1)  slot[1].trigger.model.addblock.logevent(\"TM1\", \"\", slot[1].trigger.model.LOG_INFO3, \"logevent2\")  slot[1].trigger.model.addblock.branch.once(\"TM1\", \"branchonce3\", \"sourceoutput1\")  slot[1].trigger.model.addblock.logevent(\"TM1\", \"logevent4\", slot[1].trigger.model.LOG_INFO2, \"Done.\")  print(eventlog.next())  This example demonstrates a trigger model that uses branch.once to branch to the defined block one time. Log events show the behavior.  Trigger models require at least one channel-specific command when they are initiated. The sourceoutput1 block is provided here to assign the channel.  Also see  Branch once block  slot[Z].trigger.model.addblock.branch.onceexcluded()  "},{"id":8,"title":"slot[Z].trigger.model.addblock.branch.onceexcluded()","url":"114965.htm","text":"This function causes the trigger model to branch to a specified trigger model block every time it is encountered in the trigger model except for the first time.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.branch.onceexcluded(\"triggerModelName\", \"blockName\", \"branchToBlockName\")  Z  Module slot number  triggerModelName  Name of the trigger model to which the block is added  blockName  Name of the trigger block  branchToBlockName  Name of the block to branch to on the first pass through this block  Details  The branch.onceexcluded block is ignored the first time it is encountered by the trigger model. After the first encounter, the trigger model always branches to the specified block.  The branch.onceexcluded block is reset as part of the setup for starting execution of the trigger model. When the trigger model execution completes, the internal, hidden, code has the internal counter set to state that the branch.onceexcluded block has been activated.  Example  slot[1].trigger.model.create(\"branchonceexcluded1\")  slot[1].trigger.model.addblock.source.output(\"branchonceexcluded1\", \"sourceoutput1\", 1, 1)  slot[1].trigger.model.addblock.logevent(\"branchonceexcluded1\", \"logevent2\", slot[1].trigger.model.LOG_INFO3, \"Visiting branch.onceexcluded.\")  slot[1].trigger.model.addblock.delay.constant(\"branchonceexcluded1\", \"delay3\", 1)  slot[1].trigger.model.addblock.branch.onceexcluded(\"branchonceexcluded1\", \"branchonceexcluded4\", \"sourceoutput1\")  slot[1].trigger.model.addblock.logevent(\"branchonceexcluded1\", \"logevent5\", slot[1].trigger.model.LOG_INFO2, \"Return because of branch counter.\")  slot[1].trigger.model.addblock.branch.counter(\"branchonceexcluded1\", \"branchcounter6\", \"sourceoutput1\", 4)  slot[1].trigger.model.initiate(\"branchonceexcluded1\")  slot[1.trigger.model.abort(\"branchonceexcluded1\")  This example demonstrates a trigger model that uses branch.onceexcluded to branch back many times, excluding the first visit. Log events show the behavior. Note the need for the call to slot[1].trigger.model.abort() to exit the trigger model. Otherwise, the trigger model will run indefinitely.  Trigger models require at least one channel-specific command when they are initiated. The sourceoutput1 block is meant only to assign a channel.  Trigger model diagram  Also see  Branch once excluded block  slot[Z].trigger.model.addblock.branch.once()  "},{"id":9,"title":"slot[Z].trigger.model.addblock.configlist.next()","url":"115499.htm","text":"This function recalls the settings at the next index of a configuration list.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.configlist.next(\"triggerModelName\", \"blockName\", channel, \"configlistName\")  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the block to be added  channel  Module channel number  configlistName  A string that defines the configuration list to recall  Details  When trigger model execution reaches a configuration recall next block, the settings at the next index in the specified configuration list are restored.  The first time the trigger model encounters this block for a specific configuration list, the first index is recalled if the list has not already had an index recalled by the recall block command in an earlier trigger model block. If the configuration list has recalled an index with the recall block, the next index in the list is recalled instead of the first. For example, the recall block recalls index 1 by default, so if the trigger model uses a recall block before this one, the first time the next block is reached after that recall, index 2 is recalled. Each subsequent time this block is encountered, the settings at the next index in the configuration list are recalled and take effect before the next step executes. When the last index in the list is reached, it returns to the first index.  The configuration lists must be defined before you can use this block.  Example  -- Create and store a config list with three indices.  LOOPS = 3 * 2  slot[1].smu[1].source.levelv = 0.0  slot[1].smu[1].configlist.create(\"MyConfigList\")  slot[1].smu[1].source.levelv = 1.0  slot[1].smu[1].configlist.store(\"MyConfigList\")  slot[1].smu[1].source.levelv = 2.0  slot[1].smu[1].configlist.store(\"MyConfigList\")  slot[1].smu[1].source.levelv = 3.0  slot[1].smu[1].configlist.store(\"MyConfigList\")  slot[1].trigger.model.delete(\"configlistnext1\")  slot[1].trigger.model.create(\"configlistnext1\")  slot[1].trigger.model.addblock.source.output(\"configlistnext1\", \"sourceoutput1\", 1, 1)  slot[1].trigger.model.addblock.configlist.recall(\"configlistnext1\", \"configlistrecall2\", 1, \"MyConfigList\", 1)  slot[1].trigger.model.addblock.delay.constant(\"configlistnext1\", \"delay3\", 0.1)  slot[1].trigger.model.addblock.configlist.next(\"configlistnext1\", \"configlistnext4\", 1, \"MyConfigList\")  slot[1].trigger.model.addblock.branch.counter(\"configlistnext1\", \"branchcounter5\", \"delay3\", LOOPS)  slot[1].trigger.model.addblock.source.output(\"configlistnext1\", \"TheEnd\", 1, 0)  slot[1].trigger.model.initiate(\"configlistnext1\")  This example demonstrates a trigger model that uses configlistnext to step the output through 3 states. As the number of loops is 6, there should be 6 output transitions.  Also see  Confiig list next block  "},{"id":10,"title":"slot[Z].trigger.model.addblock.configlist.prev()","url":"115500.htm","text":"This function defines a trigger model block that recalls the settings stored at the previous index in a configuration list.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.configlist.prev(\"triggerModelName\", \"blockName\", channel, \"configlistName\")  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the block to be added  channel  Module channel number  configlistName  A string that defines the configuration list to recall  Details  This trigger model block recalls the settings stored at the previous index in a configuration list if a single configuration list is specified.  The configuration list previous index trigger block type recalls the previous index in a configuration list. It configures the settings of the instrument based on the settings at that index. The trigger model executes the settings at that index before the next block is executed.  The first time the trigger model encounters this block, the last index in the configuration list is recalled if the list has not already had an index recalled by the recall block command in an earlier trigger model block. If the configuration list has recalled an index with the recall block, the previous index in the list is called instead of the last. For example, the recall block recalls index 1 by default, so if the trigger model uses a recall block before this one, the first time the previous block is reached after that recall, the last index is recalled. If the recall block recalled index 3, the previous block would recall index 2. Each subsequent time trigger model execution reaches a configuration list previous block for this configuration list, it goes backward one index. When the first index in the list is reached, it goes to the last index in the configuration list.  The configuration lists must be defined before you can use this block.  Example  SLOT = 1  -- Create and store a config list with three indices.  LOOPS = 3 * 2  slot[SLOT].smu[1].source.levelv = 0.0  slot[SLOT].smu[1].configlist.create(\"MyConfigList2\")  slot[SLOT].smu[1].source.levelv = 1.0  slot[SLOT].smu[1].configlist.store(\"MyConfigList2\")  slot[SLOT].smu[1].source.levelv = 2.0  slot[SLOT].smu[1].configlist.store(\"MyConfigList2\")  slot[SLOT].smu[1].source.levelv = 3.0  slot[SLOT].smu[1].configlist.store(\"MyConfigList2\")  slot[SLOT].trigger.model.delete(\"configlistprev1\")  slot[SLOT].trigger.model.create(\"configlistprev1\")  slot[SLOT].trigger.model.addblock.source.output(\"configlistprev1\", \"sourceoutput1\", 1, 1)  slot[SLOT].trigger.model.addblock.configlist.recall(\"configlistprev1\", \"configlistrecall2\", 1, \"MyConfigList2\", 1)  slot[SLOT].trigger.model.addblock.delay.constant(\"configlistprev1\", \"delay3\", 0.1)  slot[SLOT].trigger.model.addblock.configlist.prev(\"configlistprev1\", \"configlistprev4\", 1, \"MyConfigList2\")  slot[SLOT].trigger.model.addblock.branch.counter(\"configlistprev1\", \"branchcounter5\", \"delay3\", LOOPS)  slot[SLOT].trigger.model.addblock.source.output(\"configlistprev1\", \"TheEnd\", 1, 0)  slot[SLOT].trigger.model.initiate(\"configlistprev1\")  This example demonstrates a trigger model that uses configlist.prev to step the output backwards through three states. As the number of loops is six, there should be six output transitions.  Also see  Config list prev block  "},{"id":11,"title":"slot[Z].trigger.model.addblock.configlist.recall()","url":"115501.htm","text":"This function recalls the system settings that are stored in a configuration list.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.configlist.recall(\"triggerModelName\", \"blockName\", channel, \"configlistName\", index)  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the block to be added  channel  Module channel number  configlistName  A string that defines the configuration list to recall  index  The index in the configuration list to recall; default is 1  Details  When the trigger model reaches a configuration recall block, the settings in the specified configuration list are recalled.  You can restore a specific set of configuration settings in the configuration list by defining the index.  The configuration lists must be defined before you can use this block. If one of the indexes for the configuration list changes (because of an item being added or removed from a config list), verify that the trigger model count is still accurate.  Example  -- Create and store a 3 config Config List.  LOOPS = 3 * 2  slot[1].smu[1].source.levelv = 0.0  slot[1].smu[1].configlist.create(\"MyConfigList3\")  slot[1].smu[1].source.levelv = 1.0  slot[1].smu[1].configlist.store(\"MyConfigList3\")  slot[1].smu[1].source.levelv = 2.0  slot[1].smu[1].configlist.store(\"MyConfigList3\")  slot[1].smu[1].source.levelv = 3.0  slot[1].smu[1].configlist.store(\"MyConfigList3\")  slot[1].trigger.model.delete(\"configlistrecall1\")  slot[1].trigger.model.create(\"configlistrecall1\")  slot[1].trigger.model.addblock.source.output(\"configlistrecall1\", \"sourceoutput1\", 1, 1)  slot[1].trigger.model.addblock.configlist.recall(\"configlistrecall1\", \"configlistrecall2\", 1, \"MyConfigList3\", 1)  slot[1].trigger.model.addblock.delay.constant(\"configlistrecall1\", \"delay3\", 0.1)  slot[1].trigger.model.addblock.configlist.next(\"configlistrecall1\", \"configlistprev4\", 1, \"MyConfigList3\")  slot[1].trigger.model.addblock.branch.counter(\"configlistrecall1\", \"branchcounter5\", \"delay3\", LOOPS)  slot[1].trigger.model.addblock.source.output(\"configlistrecall1\", \"TheEnd\", 1, 0)  slot[1].trigger.model.initiate(\"configlistrecall1\")  This example demonstrates a trigger model that uses configlistrecall to start the stepping of the output through 3 states. As the number of loops loops is 6, there should be 6 output transitions.  Also see  Config list recall block  "},{"id":12,"title":"slot[Z].trigger.model.addblock.delay.constant()","url":"114967.htm","text":"This function adds a constant delay to the execution of a trigger model.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.delay.constant(\"triggerModelName\", \"blockName\", delayTime)  slot[Z].trigger.model.addblock.delay.constant(\"triggerModelName\", \"blockName\", delayTime, \"referenceBlockName\")  slot[Z].trigger.model.addblock.delay.constant(\"triggerModelName\", \"blockName\", {delayList})  slot[Z].trigger.model.addblock.delay.constant(\"triggerModelName\", \"blockName\", \"referenceBlockName\", {delayList})  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the trigger block where execution will proceed when the evaluation result is true  delayTime  Time delay as a positive value: 0.000001&nbsp;s to 1,000,000 s  referenceBlockName  Trigger model block to use for the start time of the delay; see Details  delayList  Table of delay intervals in seconds; see Details  Details  When the trigger model reaches a delay constant block, it pauses for the specified time. If referenceBlockName is specified, the trigger model pauses for the time delay since the start of the reference block.  Up to 32 different blocks can be used as reference blocks within a trigger model.  If a reference block was not visited before the delay block, the entry time of the trigger model will be used instead.  When delayList is defined, for each time the delay block is encountered in the trigger model, the next value in the list is used as the delay time. After all elements in the array have been used, the delays restart at the beginning of the list. If the array contains more than one element, the average of the delay intervals in the list must be ≥ 50 µs.   Example  slot[1].smu[1].source.levelv = 1.0  slot[1].trigger.model.create(\"TM1\")  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput1\", 1, 1)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"delay2\", 0.01)  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput3\", 1, 0)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"delay4\", 0.01)  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput5\", 1, 1)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"delay6\", 0.05, \"delay2\")    -- NOTE:  This pulse high will NOT be 50 milliseconds, because of the reference to \"delay2\".  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput7\", 1, 0)  slot[1].trigger.model.initiate(\"TM1\")  This example demonstrates a trigger model that uses delay.constant to define a pair of 1.0 volt pulses. The first pulse is 10 ms wide. The second pulse is 30 ms wide because the use of a reference block in the delay.constant will overlap some timing with the first pulse. The second pulse is accurately timed from a specific, much earlier, block.  Also see  None  "},{"id":13,"title":"slot[Z].trigger.model.addblock.logevent()","url":"115503.htm","text":"This function allows you to log an event in the event log when the trigger model is running.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.logevent(\"triggerModelName\", \"blockName\", eventNumber, \"message\")  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the block to be added  eventNumber  The event number; see Details  message  A string up to 31 characters  Details  This block allows you to log an event in the event log when trigger model execution reaches this block. You can also force the trigger model to abort with this block. When the trigger model executes the block, the defined event is logged. If the abort option is selected, the trigger model is also aborted immediately.  The eventNumber parameter defines the type of event:  Information: trigger.LOG_INFON  Warning: trigger.LOG_WARNN  Error: trigger.LOG_ERRORN  Where N is 1 to 4. You can define up to four of each type.  You can also set eventNumber to be trigger.LOG_WARN_ABORT, which aborts the trigger model immediately and posts a warning event log message.  All events generated by this block are logged in the event log. Warning and error events are also displayed on the front&#8209;panel display.  If you use this block too often in a trigger model, it could overflow the event log. The log event block takes additional time to record the event and may impact timing in critical paths. Avoid using this block in time-sensitive sections of the trigger model, such as when there must be a precise delay between two trigger model blocks or actions.  Example  slot[1].trigger.model.create(\"TM1\")  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput1\", 1, 1)  slot[1].trigger.model.addblock.logevent(\"TM1\", \"logevent2\", slot[1].trigger.model.LOG_INFO3, \"ran logevent2 block\")  slot[1].trigger.model.addblock.branch.counter(\"TM1\", \"branchcounter3\", \"sourceoutput1\", 3)  slot[1].trigger.model.addblock.logevent(\"TM1\", \"logevent4\", slot[1].trigger.model.LOG_INFO2, \"Done.\")  slot[1].trigger.model.initiate(\"TM1\")  print(eventlog.next())  This example demonstrates a trigger model that uses log events to show behavior. The message ran logevent2 block should be reported three times, then Done. is reported once.  Also see  Log event block  "},{"id":14,"title":"slot[Z].trigger.model.addblock.measure()","url":"114968.htm","text":"This function defines a trigger block that makes a measurement.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.measure(\"triggerModelName\", \"blockName\", channel)  slot[Z].trigger.model.addblock.measure(\"triggerModelName\", \"blockName\", channel, count)  Z  Module slot number  triggerModelName  Name of the trigger model to which the block is added  blockName  Name of the trigger block  channel  Channel list, specified in a table; for example:  {channel1[[, channel2]...]}  count  Number of measurements to make when this block is executed  Details  This block triggers measurements based on the measure function that is selected when the trigger model is initiated. When trigger model execution reaches this block:  The instrument begins making measurements  The trigger execution waits for the measurement to be made  If more than one channel is specified, the measure count for each channel must be the same unless a count value is also specified. Channels named in a list must be present on the same module installed in a slot; you cannot specify channels in other slots.  If count is specified, it overrides the measure count configured for the channels with slot[Z].psu[X].measure.count() or slot[Z].smu[X].measure.count().  If you are using a SMU in your trigger model, configured measure delays are imposed when the SMU encounters the measure action block.  Example  SLOT = 1  MEASURES = 2 ; PHASES = 2  rb1 = slot[SLOT].smu[1].makebuffer(MEASURES * PHASES)  slot[SLOT].smu[1].trigger.measure.v(rb1)  slot[SLOT].smu[1].source.levelv = 2.0  slot[SLOT].trigger.model.create(\"measure1\")  slot[SLOT].trigger.model.addblock.source.output(\"measure1\", \"sourceoutput1\", 1, 1)  slot[SLOT].trigger.model.addblock.measure(\"measure1\", \"measure2\", 1, MEASURES)  -- Phase 1  slot[SLOT].trigger.model.addblock.source.output(\"measure1\", \"sourceoutput3\", 1, 0)  slot[SLOT].trigger.model.addblock.measure(\"measure1\", \"measure4\", 1, MEASURES)  -- Phase 2  slot[SLOT].trigger.model.initiate(\"measure1\")  printbuffer(1, rb1.n, rb1) ; rb1.clear()  This example demonstrates a trigger model that uses measure block to collect measurements. The first pair of measurements should be near 2.0 V and the second pair of measurements should be near 0.0 V.  Also see  Measure block  "},{"id":15,"title":"slot[Z].trigger.model.addblock.measureoverlapped()","url":"114969.htm","text":"This function defines a trigger model block that makes a measurement in an overlapped mode which allows you to measure the response of the device under test while the source is being stepped.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.measureoverlapped(\"triggerModelName\", \"blockName\", channel)  slot[Z].trigger.model.addblock.measureoverlapped(\"triggerModelName\", \"blockName\", channel, count)  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the trigger block  channel  Module channel number to measure  count  Number of measurements to make when this block starts  Details  This command is used only with SMU instruments.  This block triggers measurements based on the measure function that is selected when the trigger model is initiated. When trigger model execution reaches this block:  Begins triggering measurements  The instrument processes the reading and places it into the specified reading buffer. If you are defining a reading buffer, you must create it before you define this block  If there is one measure overlapped block for a channel, there may be no other measure or measure overlapped blocks for that channel.  When running the trigger model with the measureoverlapped block, overlapped measurements can only be taken with source autoranging turned off.  To turn the source autoranging off, set the slot[z].smu[x].source.autorangeY attribute to slot[z].smu[x].OFF.  The source limit must be fixed during the running of the trigger model, and it cannot be altered by the config list.  If any of the above items are incorrectly configured, then the slot[z].smu[x].trigger.model.initiate() function generates an error.  Example  SLOT = 1  COUNT = 10  rb3 = slot[SLOT].smu[1].makebuffer(COUNT)  slot[SLOT].smu[1].trigger.measure.v(rb3)  slot[SLOT].smu[1].source.output = 0  slot[SLOT].smu[1].source.levelv = 5  slot[SLOT].trigger.model.create(\"measureoverlapped1\")  slot[SLOT].trigger.model.addblock.measureoverlapped(\"measureoverlapped1\", \"measureoverlapped1\", 1, COUNT)  slot[SLOT].trigger.model.addblock.delay.constant(\"measureoverlapped1\", \"delay2\", 0.1)  slot[SLOT].trigger.model.addblock.source.output(\"measureoverlapped1\", \"source-output3\", 1, 1)  slot[SLOT].trigger.model.addblock.delay.constant(\"measureoverlapped1\", \"delay4\", 0.1)  slot[SLOT].trigger.model.addblock.source.output(\"measureoverlapped1\", \"source-output5\", 1, 0)  rb3.clear() ; slot[SLOT].trigger.model.initiate(\"measureoverlapped1\") ; print(\"DONE\") ;  print(\"\\nvoltages:\") ; printbuffer(1, rb3.n, rb3) ; print(\"timestamps:\") ; printbuffer(1, rb3.n, rb3.timestamps)  Demonstrates a trigger model that uses the measure overlapped block to collect measurements asynchronously. The overlapped measurements are started at block measureoverlapped1 and recur while the trigger model continues running. printbuffers() prints the 10 overlapped measurements showing a 5 V pulse rise and fall over 1e−1 seconds.  Also see  Measure overlapped block  slot[z].smu[x].source.autorangeY  slot[z].smu[x].source.limitnY  slot[z].smu[x].source.limitpY  slot[z].smu[x].source.limitY  "},{"id":16,"title":"slot[Z].trigger.model.addblock.nop()","url":"114970.htm","text":"This function creates a placeholder block that performs no action in the trigger model.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.nop(\"triggerModelName\", \"blockName\")  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the trigger block  Details  This trigger block creates a placeholder that performs no action in the trigger model.  You can use this command to create a named block from which a trigger model will branch forward or backward.  Example  slot[1].smu[1].source.levelv = 3  slot[1].trigger.model.create(\"TM1\")  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput1\", 1, 1)  slot[1].trigger.model.addblock.nop(\"TM1\", \"nop2\")  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"delay3\", 0.1, \"nop2\") -- Reference delayed from block 'nop2'.  slot[1].trigger.model.addblock.branch.once(\"TM1\", \"branchonce4\", \"nop2\") -- Branch to block 'nop2'.  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput5\", 1, 0)  slot[1].trigger.model.initiate(\"TM1\")  This example demonstrates a trigger model that uses a nop block for a delay timing reference and for a branch target.  Also see  No output block  "},{"id":17,"title":"slot[Z].trigger.model.addblock.notify()","url":"114971.htm","text":"This function defines a trigger model block that generates a trigger event.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.notify(\"triggerModelName\", \"blockName\", eventId)  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the trigger block  eventId  slot[Z].trigger.model.EVENT_NOTIFYN, where N is the number of the notify event, from 1 to 8  Details  When trigger model execution reaches a notify block, the instrument generates a trigger event and immediately continues to the next block.  Other commands can reference the event that the notify block generates. For example, you can use the notify event as the stimulus of a hardware trigger line or the gating event for another trigger wait block to continue execution after waiting on the specific event generated by this notification.  Example  slot[1].smu[1].source.levelv = 5.0  slot[1].trigger.model.delete(\"TM1\")  slot[1].trigger.model.create(\"TM1\")  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput1\", 1, 1)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"delay2\", 0.1)  slot[1].trigger.model.addblock.branch.event(\"TM1\", \"branchonevent3\", \"TheEnd\", slot[1].trigger.model.EVENT_NOTIFY1)  slot[1].trigger.model.addblock.branch.counter(\"TM1\", \"branchcounter4\", \"sourceoutput1\", 3)  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput5\", 1, 0)  slot[1].trigger.model.addblock.notify(\"TM1\", \"notify6\", slot[1].trigger.model.EVENT_NOTIFY1)  slot[1].trigger.model.addblock.branch.counter(\"TM1\", \"branchcounter7\", \"sourceoutput1\", 3)  slot[1].trigger.model.addblock.source.output(\"TM1\", \"TheEnd\", 1, 0)  slot[1].trigger.model.initiate(\"TM1\")  This example demonstrates a trigger model that uses notify to differentiate 2 loops. The first loop lacks the EVENT_NOTIFY1, so its pulse is 300 ms. The second loop occurs after EVENT_NOTIFY1, so its pulse is 100&nbsp;ms long and the trigger model stops.  Trigger model diagram  Also see  Notify blocks  slot[Z].trigger.model.EVENT_NOTIFYN  "},{"id":18,"title":"slot[Z].trigger.model.addblock.reset.branch.counter()","url":"114972.htm","text":"This function defines a trigger model block that resets the count for a branch counter block.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.reset.branch.counter(\"triggerModelName\", \"blockName\", \"resetBranchCountBlockName\")  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the block to be added  resetBranchCountBlockName  Name of the branch counter block to reset the count value to 0  Details  This command defines a trigger model building block that resets the count of the branch counter block specified by resetBranchCountBlockName.  Example  slot[1].smu[1].source.levelv = 1.0  slot[1].trigger.model.delete(\"TM1\")  slot[1].trigger.model.create(\"TM1\")  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput1\", 1, 1)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"\", 0.1)  slot[1].trigger.model.addblock.source.output(\"TM1\", \"\", 1, 0)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"\", 0.1)  slot[1].trigger.model.addblock.branch.counter(\"TM1\", \"branchcounter5\", \"sourceoutput1\", 2)  slot[1].trigger.model.addblock.reset.branch.counter(\"TM1\", \"resetcount6\", \"branchcounter5\")  slot[1].trigger.model.addblock.branch.counter(\"TM1\", \"branchcounter7\", \"sourceoutput1\", 2)  slot[1].trigger.model.initiate(\"TM1\")  This example demonstrates a trigger model that outputs four pulses on channel 1. Two pulses are created the first time through the loop created by \"branchcounter5.\" Resetting \"branchcounter5\" allows for two more pulses to be created when \"branchcounter7\" forces another loop through the trigger model.  Also see  Reset branch count block  slot[Z].trigger.model.addblock.branch.counter()  "},{"id":19,"title":"slot[Z].trigger.model.addblock.source.action.bias()","url":"115504.htm","text":"This function creates a block that sets the source output level to the bias level.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.source.action.bias(\"triggerModelName\", \"blockName\", channel)  Z  Module slot number  triggerModelName  Name of the trigger model to which this block is added  blockName  Name of the trigger block  channel  Channel number  Details  The bias level is defined by the *trigger.source.levelY command, which must be set before the trigger model starts. When this block is reached, the source output is set to the bias level. For example, if you want to return to 2 V on each step, set the source level to 2 V, then define the action bias block as part of the trigger model.  To create pulses that go to the voltage in the sweep array defined by the *.trigger.source.linearV, *.trigger.source.listV, and *.trigger.source.logV commands and then to the bias voltage, you can use this command with the slot[Z].trigger.model.addblock.source.action.step() command.  Example  --Set the bias level to 2 V.  slot[1].smu[1].source.levelv = 2  --Define a linear sweep from 0 V to 5 V with six points.  slot[1].smu[1].trigger.source.linearv(0,5,6)  --Turn the source output on.  slot[1].smu[1].source.output = 1  --Delete an existing trigger model named TM1.  slot[1].trigger.model.delete(\"TM1\")  --Create a trigger model named TM1.  slot[1].trigger.model.create(\"TM1\")  --Change the source output level to the present level of the sweep configuration, then advance to the next step in the sweep.  slot[1].trigger.model.addblock.source.action.step(\"TM1\", \"sourceActionStep\", 1)  --Delay for 50 ms before proceeding to the next block.  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"delay50ms\", 0.05)  --Set the source output to return to the bias level.  slot[1].trigger.model.addblock.source.action.bias(\"TM1\", \"sourceActionBias\", 1)  --Delay for 50 ms before proceeding to the next block.  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"delay50ms\", 0.05)  --Step through the trigger mobel 6 times.  slot[1].trigger.model.addblock.branch.counter(\"TM1\",\"branchCounter\", \"sourceActionStep\", 6)  slot[1].trigger.model.initiate(\"TM1\")  waitcomplete() print(\"Done\")  slot[1].smu[1].source.output = 0  This example demonstrates a trigger model that creates a pulsed staircase sweep from 0 to 5 V in 1 V steps. The on-time for each pulse step is 50 ms and the off-time between pulse steps is 50 ms.  Also see  slot[Z].smu[X].trigger.source.linearY()  slot[Z].smu[X].trigger.source.logY()  slot[Z].trigger.model.addblock.source.action.skip()  slot[Z].trigger.model.addblock.source.action.step()  Source action bias block  "},{"id":20,"title":"slot[Z].trigger.model.addblock.source.action.set()","url":"132966.htm","text":"This function defines a trigger model block that sets the source output level to the value at the current index in the list of sweep values without advancing the index.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  No  Usage  slot[Z].trigger.model.addblock.source.action.set(\"triggerModelName\", \"blockName\", channel)  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the block to be added  channel  Channel number  Details  This command sets the source output to the sweep value at the current index without advancing to the next point. This allows you to apply the same value across multiple blocks or delay periods without changing the sweep position.  This command can be used in a trigger model to reapply or hold a source value for a specified time before proceeding. This command does not increment the sweep index, so repeated executions will use the same value unless the index is modified using another action block.  Example  -- Variables  SLOT       = 1  CHANNEL    = 1  REPEATS    = 3  POINTS     = 5  PSU        = slot[SLOT].psu[CHANNEL]  TM         = slot[SLOT].trigger.model  -- Configure linear voltage sweep  PSU.trigger.source.linearv(0, 5, POINT)  -- Create a trigger model that repeats each sweep step three times  TM.create(\"myTM\")  TM.addblock.source.action.set(\"myTM\", \"set\", CHANNEL)  TM.addblock.delay.constant(\"myTM\", \"\", 0.005)  TM.addblock.branch.counter(\"myTM\", \"\", \"set\", REPEATS)  TM.addblock.source.action.skip(\"myTM\", \"\", CHANNEL)  TM.addblock.branch.counter(\"myTM\", \"\", \"set\", POINTS)  -- Turn on the output before running the trigger model  PSU.source.levelv = 0  PSU.source.output = PSU.ON  -- Run the trigger model  TM.initiate(\"myTM\")  -- Turn off output after completion  waitcomplete()  PSU.source.output = PSU.OFF  This trigger model applies each step of a linear voltage sweep three times before advancing. It uses source.action.set to hold the current sweep value and repeats it with branch.counter before using source.action.skip to move to the next value.  Also see  slot[Z].trigger.model.addblock.source.action.bias()  slot[Z].trigger.model.addblock.source.action.skip()  slot[Z].trigger.model.addblock.source.action.step()  Source action set block  Configuration commands  slot[Z].psu[X].trigger.source.linearY | slot[Z].smu[X].trigger.source.linearY  "},{"id":21,"title":"slot[Z].trigger.model.addblock.source.action.skip()","url":"115827.htm","text":"This function defines a trigger model block that advances the index in the list of sweep values with no change to the source level.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.source.action.skip(\"triggerModelName\", \"blockName\", channel)  Z  Module slot number  triggerModelName  Name of the trigger model to which the block is added  blockName  Name of the trigger block to branch to  channel  Channel number  Details  The list of sweep values is created by one of the following commands:  smu[X].trigger.source.linearY  smu[X].trigger.source.listY  smu[X].trigger.source.logY  psu[X].trigger.source.linearY  psu[X].trigger.source.listY  pxu[X].trigger.source.logY  Example  slot[1].smu[1].trigger.source.linearv(0, 5, 6)  TM = slot[1].trigger.model  TM.delete(\"sourceaction1\")  TM.create(\"sourceaction1\")  TM.addblock.source.output(\"sourceaction1\", \"sourceoutput1\", 1, 1)  TM.addblock.source.action.step(\"sourceaction1\", \"sourceaction2\", 1)  TM.addblock.delay.constant(\"sourceaction1\", \"delay3\", 0.01)  TM.addblock.source.action.skip(\"sourceaction1\", \"sourceaction4\", 1)  TM.addblock.delay.constant(\"sourceaction1\", \"delay5\", 0.01)  TM.addblock.branch.counter(\"sourceaction1\", \"branchcounter6\", \"sourceaction2\", 12)  TM.addblock.source.output(\"sourceaction1\", \"TheEnd\", 1, 0)  TM.initiate(\"sourceaction1\")  This example demonstrates a trigger model that uses source-action to create 2 linear sweeps, 0 V to 5 V over 100 ms. The branch counter is set to 2 * COUNT, which causes a second sweep to occur.  Also see  slot[Z].trigger.model.addblock.source.action.bias()  slot[Z].trigger.model.addblock.source.action.step()  slot[Z].trigger.model.addblock.source.output()  Source action skip block  Configuration commands  slot[Z].psu[X].trigger.source.linearY  slot[Z].smu[X].trigger.source.linearY  slot[Z].psu[X].trigger.source.listY  slot[Z].smu[X].trigger.source.listY  slot[Z].psu[X].trigger.source.logY  slot[Z].smu[X].trigger.source.logY  "},{"id":22,"title":"slot[Z].trigger.model.addblock.source.action.step()","url":"114973.htm","text":"This function defines a trigger model block that advances the source output to the index in the list of sweep values for the specified channel.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.source.action.step(\"triggerModelName\", \"blockName\", channel)  Z  Module slot number  triggerModelName  Name of the trigger model to which the block is added  blockName  Name of the trigger block defining where to branch  channel  Channel number  Details  To create pulses that go to the voltage in the sweep array and then to the bias voltage, you can use this command with the slot[Z].trigger.model.addblock.source.action.bias() command.  The list of sweep values is created by one of the following commands:  smu[X].trigger.source.linearY  smu[X].trigger.source.listY  smu[X].trigger.source.logY  psu[X].trigger.source.linearY  psu[X].trigger.source.listY  pxu[X].trigger.source.logY  Example  slot[1].smu[1].trigger.source.linearv(0,5,6)  slot[1].smu[1].source.output = 1  TM = slot[1].trigger.model  TM.delete(\"TM1\")  TM.create(\"TM1\")  --Go to the next step in the sweep.  TM.addblock.source.action.step(\"TM1\", \"sourceActionStep\", CHANNEL_NUM)  --Add a delay before executing the next step in the sweep.  TM.addblock.delay.constant(\"TM1\", \"delay50ms\", 0.05)  TM.addblock.branch.counter(\"TM1\",\"branchCounter\", \"sourceActionStep\", 6)  TM.initiate(\"TM1\")  waitcomplete() print(\"Done\")  slot[1].smu[1].source.output = 0  This example demonstrates a trigger model that increases from 0 V to 5 V in 1 V steps.  Also see  slot[Z].trigger.model.addblock.source.action.bias()  slot[Z].trigger.model.addblock.source.action.skip()  Source action step block  Sweep configuration commands  slot[Z].psu[X].trigger.source.linearY  slot[Z].smu[X].trigger.source.linearY  slot[Z].psu[X].trigger.source.listY  slot[Z].smu[X].trigger.source.listY  slot[Z].psu[X].trigger.source.logY  slot[Z].smu[X].trigger.source.logY  "},{"id":23,"title":"slot[Z].trigger.model.addblock.source.output()","url":"114974.htm","text":"This function defines a trigger model block that turns the output source on or off.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.source.output(\"triggerModelName\", \"blockName\", channel, state)  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the trigger block to be added  channel  Module channel number  state  Turn the source off: slot[Z].smu.OFF  Turn the source on: slot[Z].smu.ON  Details  The source output block determines if the output source is turned on or off when the trigger model reaches this block. This block does not determine the settings of the output source, such as the output voltage level. The source settings are determined by either the present settings of the instrument or by a configuration list.  Although pulses can be created by turning the output on and off, the instrument typically performs multiple actions when turning the output on and off. For more precise timing, use the slot[Z].trigger.model.addblock.source.action.step() and slot[Z].trigger.model.addblock.source.action.bias() blocks to create pulses at the output.  Example  slot[1].smu[1].source.levelv = 4.2  slot[1].trigger.model.delete(\"TM1\")  slot[1].trigger.model.create(\"TM1\")  slot[1].trigger.model.addblock.source.output(\"TM1\", \"sourceoutput1\", 1, 1)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"\", 0.01)  slot[1].trigger.model.addblock.source.output(\"TM1\", \"\", 1, 0)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"\", 0.005)  slot[1].trigger.model.addblock.branch.counter(\"TM1\", \"branchcounter5\", \"sourceoutput1\", 10)  slot[1].trigger.model.initiate(\"TM1\")  This example demonstrates a trigger model that uses source.output blocks to create 10 pulses of 4.2 V that are approximately 10 ms wide with 5 ms between each pulse.  Also see  Source output block  "},{"id":24,"title":"slot[Z].trigger.model.addblock.wait()","url":"114975.htm","text":"This function defines a trigger model block that waits for up to four events before allowing the trigger model to continue.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.addblock.wait(\"triggerModelName\", \"blockName\", event)  slot[Z].trigger.model.addblock.wait(\"triggerModelName\", \"blockName\", event, clear)  slot[Z].trigger.model.addblock.wait(\"triggerModelName\", \"blockName\", event, clear, logic)  slot[Z].trigger.model.addblock.wait(\"triggerModelName\", \"blockName\", event, clear, logic, event)  slot[Z].trigger.model.addblock.wait(\"triggerModelName\", \"blockName\", event, clear, logic, event, event)  slot[Z].trigger.model.addblock.wait(\"triggerModelName\", \"blockName\", event, clear, logic, event, event, event)  Z  Module slot number  triggerModelName  Name of the trigger model to which the block will be added  blockName  Name of the trigger block being added by this command  event  The event that must occur before the trigger block allows trigger execution to continue (see Details)  clear  To clear previously detected trigger events when entering the wait block:  trigger.CLEAR_ENTER  To immediately act on any previously detected triggers and not clear them (default):  trigger.CLEAR_NEVER  logic  If each event must occur before the trigger model continues: trigger.WAIT_AND  If at least one of the events must occur before the trigger model continues:  trigger.WAIT_OR  Details  You can use this command to synchronize measurements with other instruments and devices. You can set the instrument to wait for the following events:  Notify  Command interface trigger  Digital input/output signals, such as DIGIO and TSP-Link  The event can occur before trigger model execution reaches the wait block. If the event occurs after trigger model execution starts but before the trigger model execution reaches the wait block, the trigger model records the event.  By default, when trigger model execution reaches the wait block, it executes the wait block without waiting for the event to occur again when the clear parameter is set to never.   The instrument clears the memory of the recorded event when trigger model execution is at the start block and when the trigger model exits the wait block. It also clears the recorded trigger event when the clear parameter is set to enter.  The following event IDs can be used with this command:  ID  Description  digio.trigger[N].EVENT_ID  Occurs when a digital I/O line changes state according to its configured trigger mode  slot[Z].trigger.model.EVENT_AT_LIMIT (SMUs only)  slot[Z].trigger.model.EVENT_NOTIFYN  Occurs when the notify block of the trigger model is executed  trigger.generator[N].EVENT_ID  Trigger generator event  trigger.timer[N].EVENT_ID  Occurs when the timer delay of timer N elapses  tsplink.trigger[N].EVENT_ID  Occurs when a TSP-Link line changes state according to its configured trigger mode  Example  SMU1 = slot[1].smu[1]  SMU2 = slot[1].smu[2]  SMU1.source.levelv = 4.2 ; SMU2.source.levelv = 5.3  SMU1.source.output = 0 ; SMU2.source.output = 0  EVENT = slot[1].trigger.model.EVENT_NOTIFY1  TM = slot[1].trigger.model  TM.delete(\"waitCH1\") ; TM.delete(\"notifyCH2\")  TM.create(\"waitCH1\") ; TM.create(\"notifyCH2\")  TM.addblock.wait(\"waitCH1\", \"wait1\", EVENT)  TM.addblock.source.output(\"waitCH1\", \"sourceoutput2\", 1, 1)  TM.addblock.delay.constant(\"waitCH1\", \"delay2\", 0.01)  TM.addblock.source.output(\"waitCH1\", \"sourceoutput3\", 1, 0)  TM.addblock.source.output(\"notifyCH2\", \"sourceoutput1\", 2, 1)  TM.addblock.notify(\"notifyCH2\", \"notify2\", EVENT)  TM.addblock.delay.constant(\"notifyCH2\", \"delay3\", 0.01)  TM.addblock.source.output(\"notifyCH2\", \"sourceoutput3\", 2, 0)  TM.initiate(\"waitCH1\") ; TM.initiate(\"notifyCH2\")  This example demonstrates a trigger model that uses 2 channels to create a wait and notify pair. The wait trigger model is initiated first and when the notify trigger model reaches the notify block, the outputs of both channels will turn on for approximately 10 ms.  Also see  Wait block  "},{"id":25,"title":"slot[Z].trigger.model.create()","url":"114957.htm","text":"This function creates a trigger model.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.create(\"triggerModelName\")  Z  Module slot number  triggerModelName  Name of the trigger model to create  Details  You can create multiple, named trigger models with this command. Duplicate or empty trigger model name strings are not accepted; if you attempt to create a trigger model without a name or with a name that already exists, an error will occur.  You can add trigger model blocks with the slot[Z].trigger.model.addblock.* series of functions. You must reference the name of the trigger model in each addblock command.  Example  SLOT = 1  slot[SLOT].smu[1].source.levelv = 1.0  slot[SLOT].trigger.model.create(\"create1\")  slot[SLOT].trigger.model.addblock.source.output(\"create1\", \"sourceoutput1\", 1, 1)  slot[SLOT].trigger.model.addblock.delay.constant(\"create1\", \"delay2\", 0.1)  slot[SLOT].trigger.model.addblock.source.output(\"create1\", \"sourceoutput3\", 1, 0)  slot[SLOT].trigger.model.initiate(\"create1\")  This example creates a trigger model that turns on the output of channel 1 for 100 ms for the module installed in slot 1.  Also see  slot[Z].trigger.model.delete()  "},{"id":26,"title":"slot[Z].trigger.model.delete()","url":"114958.htm","text":"This function deletes a trigger model.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.delete(\"triggerModelName\")  Z  Module slot number  triggerModelName  Name of the trigger model to delete  Details  This function deletes a trigger model. Attempting to delete a running trigger model will cause an error.  You can add trigger model blocks with the slot[Z].trigger.model.addblock.* series of functions.  Example  slot[1].trigger.model.create(\"delete1\")  slot[1].trigger.model.delete(\"delete1\")  Creates and then deletes a trigger model named delete1 on the module installed in slot 1.  Also see  slot[Z].trigger.model.create()  "},{"id":27,"title":"slot[Z].trigger.model.EVENT_AT_LIMIT","url":"118326.htm","text":"This function   Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  results = group.function(value)  value  The parameter meaning something  results  The return code from the function call  Details  Add details here  Example  Also see  None  "},{"id":28,"title":"slot[Z].trigger.model.EVENT_NOTIFYN","url":"118323.htm","text":"This constant contains the trigger model notify event number.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  eventId = slot[Z].trigger.model.EVENT_NOTIFYN  eventId  The trigger event number  Z  Module slot number  N  The notify event number, from 1 to 8  Details  Use this constant to refer to events generated by the notify block in the trigger model.  To have another trigger object respond to trigger events generated by this notify block, set the stimulus of the other object to the value of this constant.  The following table is a summary of event IDs.  ID  Description  digio.trigger[N].EVENT_ID  Occurs when a digital I/O line changes state according to its configured trigger mode  slot[Z].trigger.model.EVENT_AT_LIMIT (SMUs only)  slot[Z].trigger.model.EVENT_NOTIFYN  Occurs when the notify block of the trigger model is executed  trigger.generator[N].EVENT_ID  Trigger generator event  trigger.timer[N].EVENT_ID  Occurs when the timer delay of timer N elapses  tsplink.trigger[N].EVENT_ID  Occurs when a TSP-Link line changes state according to its configured trigger mode  Example  digio.trigger[1].mode = digio.MODE_TRIGGER_OUT  digio.trigger[1].stimulus = slot[1].trigger.model.EVENT_NOTIFY1  Sets digital I/O line 1 to be an output trigger line and configures the stimulus to be NOTIFY1 on slot 1. When EVENT_NOTIFY is encountered in the trigger model, digital I/O line 1 will change state.  Also see  Notify blocks  slot[Z].trigger.model.addblock.notify()  "},{"id":29,"title":"slot[Z].trigger.model.initiate()","url":"114959.htm","text":"This function starts a specified trigger model on a module.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.initiate(\"triggerModelName\")  Z  Module slot number  triggerModelName  Name of the trigger model to start  Details  This function builds and runs the named trigger model on a module. When this function completes, the trigger model continues to run in the background. Any improperly configured trigger model blocks generate an error when this command is run.  Initiating a trigger module that is already running or a trigger model that has not yet been created will cause an error.  To pause execution until a trigger model is complete, use waitcomplete(). To abort a running trigger model, use slot[Z].trigger.model.abort.  Example  SLOT =1  slot[1].smu[1].source.levelv = 1.0  slot[1].trigger.model.create(\"TM1\")  slot[1].trigger.model.addblock.source.output(\"TM1\", \"\", 1, 1)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"\", 0.1)  slot[1].trigger.model.addblock.source.output(\"TM1\", \"\", 1, 0)  slot[1].trigger.model.initiate(\"TM1\")  Initiates trigger model initiate1, which turns on the output of channel 1 installed in slot 1 for 100 ms.   Also see  slot[Z].trigger.model.abort  "},{"id":30,"title":"slot[Z].trigger.model.removeblock()","url":"115826.htm","text":"This function removes the trigger block from the trigger model.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  slot[Z].trigger.model.removeblock(\"triggerModelName\", \"triggerBlockName\")  Z  Module slot number  triggerModelName  Name of the trigger model from which this trigger block will be removed  triggerBlockName  Unique name of the trigger block to remove; this string cannot be empty  Details  When this command is executed, the specified trigger block within the named trigger model will be deleted. If either the trigger block name or the trigger model name does not exist, an error message will be returned.  You can add trigger model blocks with the slot[Z].trigger.model.addblock.* series of functions.  Example  --- Set the initial voltage output for SMU Ch1 to 2 V   ---  slot[1].smu[1].source.levelv = 2  --- Delete old trigger model instances before creating new ones ---  slot[1].trigger.model.delete(\"TM1\")  slot[1].trigger.model.create(\"TM1\")  --- Delete the second delay constant block before trigger model initiates ---  slot[1].trigger.model.addblock.source.output(\"TM1\", \"OutputOn\", 1, 1)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"Delay1\", 0.2)  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"Delay2\", 0.5)  slot[1].trigger.model.addblock.source.output(\"TM1\", \"OutputOff\", 1, 0)  slot[1].trigger.model.removeblock(\"TM1\", \"Delay2\")  --- Execute the trigger model ---  slot[1].trigger.model.initiate(\"TM1\")  This example uses the slot[Z].trigger.model.removeblock() command to delete an existing trigger model block. This prevents the second trigger model delay block (0.5 s) from running when the trigger model is initiated.  Also see  None  "},{"id":31,"title":"slot[Z].trigger.model.state()","url":"115506.htm","text":"This function returns the present state of the trigger model.  Type  TSP-Link accessible  Affected by  Where saved  Default value  Function  Yes  Usage  status = slot[Z].trigger.model.state(\"triggerModelName\")  status  The status of the trigger model:  trigger.STATE_ABORTED  trigger.STATE_ABORTING  trigger.STATE_BUILDING  trigger.STATE_EMPTY  trigger.STATE_FAILED  trigger.STATE_IDLE  trigger.STATE_RUNNING  Z  Module slot number  triggerModelName  Name of the trigger model  Details  This function returns the state of the trigger model. The instrument checks the state of a trigger model as the model executes. A trigger model name is required; an empty set of parentheses will cause an error.  The trigger model states are:  Aborted: The trigger model is stopped  Aborting: The trigger model is stopping  Building: Blocks have been added  Empty: The trigger model is selected, but no blocks are defined  Failed: The trigger model is stopped because of an error  Idle: The trigger model is stopped  Running: The trigger model is running  Example  slot[1].trigger.model.delete(\"TM1\")  slot[1].trigger.model.create(\"TM1\")  print(slot[1].trigger.model.state(\"TM1\"))  slot[1].trigger.model.addblock.delay.constant(\"TM1\", \"delay\", 0.1)  print(slot[1].trigger.model.state(\"TM1\"))  Prints the state of trigger model TM1. Output after creating TM1 is trigger.STATE_EMPTY. Output after adding a block is trigger.STATE_BUILDING.&nbsp;  Also see  slot[Z].trigger.model.abort()  slot[Z].trigger.model.initiate()  "}]}